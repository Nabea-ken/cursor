<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cursor Clone - AI-Powered Code Editor</title>
    <link rel="stylesheet" href="styles.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
</head>
<body>
    <div id="app">
        <!-- Top toolbar -->
        <div id="toolbar">
            <div class="toolbar-left">
                <button id="toggle-explorer-btn" class="toolbar-btn" title="Toggle File Explorer">
                    <i class="fas fa-folder"></i>
                </button>
                <button id="new-file-btn" class="toolbar-btn" title="New File (Ctrl+N)">
                    <i class="fas fa-file"></i>
                </button>
                <button id="open-file-btn" class="toolbar-btn" title="Open File (Ctrl+O)">
                    <i class="fas fa-folder-open"></i>
                </button>
                <button id="save-file-btn" class="toolbar-btn" title="Save (Ctrl+S)">
                    <i class="fas fa-save"></i>
                </button>
                <div class="separator"></div>
                <span id="file-name" class="file-name">Untitled</span>
            </div>
            <div class="toolbar-right">
                <button id="ai-provider-btn" class="toolbar-btn" title="AI Provider Settings">
                    <i class="fas fa-robot"></i>
                </button>
                <button id="api-key-btn" class="toolbar-btn" title="Set API Key">
                    <i class="fas fa-key"></i>
                </button>
                <button id="toggle-chat-btn" class="toolbar-btn" title="Toggle AI Chat">
                    <i class="fas fa-comments"></i>
                </button>
            </div>
        </div>

        <!-- Main content area -->
        <div id="main-content">
            <!-- File Explorer Panel -->
            <div id="explorer-panel" class="explorer-panel">
                <div class="explorer-header">
                    <h3><i class="fas fa-folder"></i> Explorer</h3>
                    <button id="close-explorer-btn" class="close-btn">
                        <i class="fas fa-times"></i>
                    </button>
                </div>
                <div class="explorer-content">
                    <div class="explorer-actions">
                        <button id="new-folder-btn" class="explorer-btn" title="New Folder">
                            <i class="fas fa-folder-plus"></i>
                        </button>
                        <button id="refresh-explorer-btn" class="explorer-btn" title="Refresh">
                            <i class="fas fa-sync-alt"></i>
                        </button>
                    </div>
                    <div id="file-tree" class="file-tree">
                        <div class="file-tree-item">
                            <i class="fas fa-folder"></i>
                            <span>No folder opened</span>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Editor container -->
            <div id="editor-container">
                <div id="monaco-editor"></div>
            </div>

            <!-- AI Chat panel -->
            <div id="chat-panel" class="chat-panel">
                <div class="chat-header">
                    <h3><i class="fas fa-robot"></i> AI Assistant</h3>
                    <button id="close-chat-btn" class="close-btn">
                        <i class="fas fa-times"></i>
                    </button>
                </div>
                <div id="chat-messages" class="chat-messages">
                    <div class="welcome-message">
                        <i class="fas fa-robot"></i>
                        <h4>Welcome to Cursor Clone!</h4>
                        <p>I'm your AI programming assistant. Ask me anything about your code, request refactoring, or get explanations.</p>
                        <div class="ai-providers-info">
                            <h5>Available AI Providers:</h5>
                            <ul>
                                <li><strong>OpenAI</strong> - GPT-4o-mini (requires API key)</li>
                                <li><strong>Ollama</strong> - Local models (free)</li>
                                <li><strong>HuggingFace</strong> - Open source models (free)</li>
                            </ul>
                        </div>
                        <div class="api-key-notice" id="api-key-notice">
                            <i class="fas fa-exclamation-triangle"></i>
                            <span>Please set your AI provider to start using AI features.</span>
                            <button id="set-ai-provider-btn" class="btn-primary">Configure AI</button>
                        </div>
                    </div>
                </div>
                <div class="chat-input-container">
                    <div class="chat-input-wrapper">
                        <textarea id="chat-input" placeholder="Ask me about your code..." rows="2"></textarea>
                        <button id="send-chat-btn" class="send-btn" disabled>
                            <i class="fas fa-paper-plane"></i>
                        </button>
                    </div>
                    <div class="chat-actions">
                        <button id="send-selected-btn" class="action-btn" title="Send selected code as context">
                            <i class="fas fa-code"></i> Send Selected
                        </button>
                        <button id="send-file-btn" class="action-btn" title="Send entire file as context">
                            <i class="fas fa-file-code"></i> Send File
                        </button>
                        <button id="generate-code-btn" class="action-btn" title="Generate code">
                            <i class="fas fa-magic"></i> Generate
                        </button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Status bar -->
        <div id="status-bar">
            <div class="status-left">
                <span id="cursor-position">Ln 1, Col 1</span>
                <span id="file-language">JavaScript</span>
                <span id="ai-provider-status">AI: Not configured</span>
            </div>
            <div class="status-right">
                <span id="ai-status" class="ai-status">
                    <i class="fas fa-circle"></i> AI Ready
                </span>
            </div>
        </div>
    </div>

    <!-- AI Provider Modal -->
    <div id="ai-provider-modal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3><i class="fas fa-robot"></i> AI Provider Configuration</h3>
                <button id="close-ai-modal-btn" class="close-btn">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="modal-body">
                <div class="ai-provider-tabs">
                    <button class="tab-btn active" data-tab="openai">OpenAI</button>
                    <button class="tab-btn" data-tab="ollama">Ollama (Local)</button>
                    <button class="tab-btn" data-tab="huggingface">HuggingFace</button>
                </div>
                
                <div class="tab-content active" id="openai-tab">
                    <h4>OpenAI Configuration</h4>
                    <p>Use OpenAI's GPT models for AI assistance. Requires API key.</p>
                    <div class="input-group">
                        <label for="openai-api-key">API Key:</label>
                        <input type="password" id="openai-api-key" placeholder="sk-..." />
                    </div>
                    <div class="input-group">
                        <label for="openai-model">Model:</label>
                        <select id="openai-model">
                            <option value="gpt-4o-mini">GPT-4o-mini (Recommended)</option>
                            <option value="gpt-4o">GPT-4o</option>
                            <option value="gpt-3.5-turbo">GPT-3.5-turbo</option>
                        </select>
                    </div>
                </div>
                
                <div class="tab-content" id="ollama-tab">
                    <h4>Ollama Configuration</h4>
                    <p>Use local AI models with Ollama. Free and runs locally.</p>
                    <div class="input-group">
                        <label for="ollama-url">Ollama URL:</label>
                        <input type="text" id="ollama-url" placeholder="http://localhost:11434" value="http://localhost:11434" />
                    </div>
                    <div class="input-group">
                        <label for="ollama-model">Model:</label>
                        <select id="ollama-model">
                            <option value="codellama">CodeLlama (Recommended)</option>
                            <option value="llama2">Llama2</option>
                            <option value="mistral">Mistral</option>
                            <option value="phi">Phi-2</option>
                        </select>
                    </div>
                    <div class="ollama-install-info">
                        <h5>Install Ollama:</h5>
                        <p>Download from <a href="https://ollama.ai" target="_blank">ollama.ai</a></p>
                        <p>Then run: <code>ollama pull codellama</code></p>
                    </div>
                </div>
                
                <div class="tab-content" id="huggingface-tab">
                    <h4>HuggingFace Configuration</h4>
                    <p>Use open source models from HuggingFace. Free tier available.</p>
                    <div class="input-group">
                        <label for="hf-api-key">API Key (Optional):</label>
                        <input type="password" id="hf-api-key" placeholder="hf_..." />
                    </div>
                    <div class="input-group">
                        <label for="hf-model">Model:</label>
                        <select id="hf-model">
                            <option value="microsoft/DialoGPT-medium">DialoGPT (Chat)</option>
                            <option value="gpt2">GPT-2</option>
                            <option value="microsoft/DialoGPT-small">DialoGPT Small</option>
                        </select>
                    </div>
                </div>
                
                <div class="modal-actions">
                    <button id="save-ai-config-btn" class="btn-primary">Save Configuration</button>
                    <button id="test-ai-connection-btn" class="btn-secondary">Test Connection</button>
                    <button id="cancel-ai-config-btn" class="btn-secondary">Cancel</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Context Menu for Editor -->
    <div id="context-menu" class="context-menu">
        <div class="context-menu-item" id="refactor-menu-item">
            <i class="fas fa-magic"></i> Refactor Code
        </div>
        <div class="context-menu-item" id="explain-menu-item">
            <i class="fas fa-question-circle"></i> Explain Code
        </div>
        <div class="context-menu-item" id="generate-menu-item">
            <i class="fas fa-plus"></i> Generate Code
        </div>
        <div class="context-menu-item" id="optimize-menu-item">
            <i class="fas fa-rocket"></i> Optimize Code
        </div>
        <div class="context-menu-separator"></div>
        <div class="context-menu-item" id="copy-menu-item">
            <i class="fas fa-copy"></i> Copy
        </div>
        <div class="context-menu-item" id="cut-menu-item">
            <i class="fas fa-cut"></i> Cut
        </div>
        <div class="context-menu-item" id="paste-menu-item">
            <i class="fas fa-paste"></i> Paste
        </div>
    </div>

    <!-- Loading overlay -->
    <div id="loading-overlay" class="loading-overlay">
        <div class="loading-spinner">
            <i class="fas fa-spinner fa-spin"></i>
            <span>Loading...</span>
        </div>
    </div>

    <!-- Scripts -->
    <script src="https://unpkg.com/monaco-editor@0.45.0/min/vs/loader.js"></script>
    <script src="app.js"></script>
</body>
</html>
