<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cursor Clone - AI-Powered Code Editor</title>
    <link rel="stylesheet" href="styles.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
</head>
<body>
    <div id="app">
        <!-- Top toolbar -->
        <div id="toolbar">
            <div class="toolbar-left">
                <button id="new-file-btn" class="toolbar-btn" title="New File (Ctrl+N)">
                    <i class="fas fa-file"></i>
                </button>
                <button id="open-file-btn" class="toolbar-btn" title="Open File (Ctrl+O)">
                    <i class="fas fa-folder-open"></i>
                </button>
                <button id="save-file-btn" class="toolbar-btn" title="Save (Ctrl+S)">
                    <i class="fas fa-save"></i>
                </button>
                <div class="separator"></div>
                <span id="file-name" class="file-name">Untitled</span>
            </div>
            <div class="toolbar-right">
                <button id="api-key-btn" class="toolbar-btn" title="Set API Key">
                    <i class="fas fa-key"></i>
                </button>
                <button id="toggle-chat-btn" class="toolbar-btn" title="Toggle AI Chat">
                    <i class="fas fa-comments"></i>
                </button>
            </div>
        </div>

        <!-- Main content area -->
        <div id="main-content">
            <!-- Editor container -->
            <div id="editor-container">
                <div id="monaco-editor"></div>
            </div>

            <!-- AI Chat panel -->
            <div id="chat-panel" class="chat-panel">
                <div class="chat-header">
                    <h3><i class="fas fa-robot"></i> AI Assistant</h3>
                    <button id="close-chat-btn" class="close-btn">
                        <i class="fas fa-times"></i>
                    </button>
                </div>
                <div id="chat-messages" class="chat-messages">
                    <div class="welcome-message">
                        <i class="fas fa-robot"></i>
                        <h4>Welcome to Cursor Clone!</h4>
                        <p>I'm your AI programming assistant. Ask me anything about your code, request refactoring, or get explanations.</p>
                        <div class="api-key-notice" id="api-key-notice">
                            <i class="fas fa-exclamation-triangle"></i>
                            <span>Please set your OpenAI API key to start using AI features.</span>
                            <button id="set-api-key-chat-btn" class="btn-primary">Set API Key</button>
                        </div>
                    </div>
                </div>
                <div class="chat-input-container">
                    <div class="chat-input-wrapper">
                        <textarea id="chat-input" placeholder="Ask me about your code..." rows="2"></textarea>
                        <button id="send-chat-btn" class="send-btn" disabled>
                            <i class="fas fa-paper-plane"></i>
                        </button>
                    </div>
                    <div class="chat-actions">
                        <button id="send-selected-btn" class="action-btn" title="Send selected code as context">
                            <i class="fas fa-code"></i> Send Selected
                        </button>
                        <button id="send-file-btn" class="action-btn" title="Send entire file as context">
                            <i class="fas fa-file-code"></i> Send File
                        </button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Status bar -->
        <div id="status-bar">
            <div class="status-left">
                <span id="cursor-position">Ln 1, Col 1</span>
                <span id="file-language">JavaScript</span>
            </div>
            <div class="status-right">
                <span id="ai-status" class="ai-status">
                    <i class="fas fa-circle"></i> AI Ready
                </span>
            </div>
        </div>
    </div>

    <!-- API Key Modal -->
    <div id="api-key-modal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3><i class="fas fa-key"></i> Set OpenAI API Key</h3>
                <button id="close-modal-btn" class="close-btn">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="modal-body">
                <p>Enter your OpenAI API key to enable AI features like code completion, chat, and refactoring.</p>
                <div class="input-group">
                    <label for="api-key-input">API Key:</label>
                    <input type="password" id="api-key-input" placeholder="sk-..." />
                </div>
                <div class="modal-actions">
                    <button id="save-api-key-btn" class="btn-primary">Save API Key</button>
                    <button id="cancel-api-key-btn" class="btn-secondary">Cancel</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Context Menu for Editor -->
    <div id="context-menu" class="context-menu">
        <div class="context-menu-item" id="refactor-menu-item">
            <i class="fas fa-magic"></i> Refactor Code
        </div>
        <div class="context-menu-item" id="explain-menu-item">
            <i class="fas fa-question-circle"></i> Explain Code
        </div>
        <div class="context-menu-separator"></div>
        <div class="context-menu-item" id="copy-menu-item">
            <i class="fas fa-copy"></i> Copy
        </div>
        <div class="context-menu-item" id="cut-menu-item">
            <i class="fas fa-cut"></i> Cut
        </div>
        <div class="context-menu-item" id="paste-menu-item">
            <i class="fas fa-paste"></i> Paste
        </div>
    </div>

    <!-- Loading overlay -->
    <div id="loading-overlay" class="loading-overlay">
        <div class="loading-spinner">
            <i class="fas fa-spinner fa-spin"></i>
            <span>Loading...</span>
        </div>
    </div>

    <!-- Scripts -->
    <script src="https://unpkg.com/monaco-editor@0.45.0/min/vs/loader.js"></script>
    <script src="app.js"></script>
</body>
</html>
